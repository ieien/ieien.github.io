---
title: CentOS安装MariaDB数据库
date: 2019-12-13
updated: 2019-12-13
description: CentOS 7自带的MariaDB安装源版本太低？如何在CentOS7上安装最新版的MariaDB数据库，以及安装后的字符编码设置。
categories: Linux
tags: linux MariaDB MySQL CentOS
---

### MariaDB 与 MySQL

&nbsp;&nbsp;&nbsp;&nbsp;MariaDB不仅仅是MySQL的一个替代品，它的主要目的是创新和提高MySQL的技术。开源，完全免费。<br>
&nbsp;&nbsp;&nbsp;&nbsp;CentOS 6 或早期的版本中提供的是 MySQL 的服务器/客户端安装包，但 CentOS 7 已使用了 MariaDB 替代了默认的 MySQL。MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可 MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。

> Linux下安装MariaDB官方文档参见：[https://mariadb.com/resources/blog/installing-mariadb-10-on-centos-7-rhel-7/](https://mariadb.com/resources/blog/installing-mariadb-10-on-centos-7-rhel-7/)


### 安装MariaDB最新版本

#### 删除原有的软件包

1. 使用搜索 MariaDB 现有的包，一般会搜到mariadb-libs-5.5.60-1.el7_5.x86_64
   
        rpm -qa | grep mariadb

2. 如果存在，使用全部删除<br>
   
        rpm -e --nodeps mariadb-*
        //或者
        rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64

#### 配置yum源

1. 使用源配置向导<br>
[https://downloads.mariadb.org/mariadb/repositories](https://downloads.mariadb.org/mariadb/repositories)<br>
        <figure>
        <a><img src="{{site.url}}/post_image/yum_mariadb.png"></a>
        </figure>
&nbsp;&nbsp;&nbsp;&nbsp;可以选择合适的操作系统和想要安装的MariaDB版本，然后自动生成源配置。<br>


1. 配置yum源

        cd /etc/yum.repos.d/
        vim MariaDB.repo

&nbsp;&nbsp;&nbsp;&nbsp;将上面红框中的内容复制进去，保存退出。<br>


3. 安装MariaDB

        yum install MariaDB-server MariaDB-client

    &nbsp;&nbsp;&nbsp;&nbsp;如果出现了" MariaDB can’t be installed because of conflict with mariadb-libs-xxxx "，则需要先卸载当前安装的版本：

        yum remove mariadb-libs*

    &nbsp;&nbsp;&nbsp;&nbsp;安装完成后，会提示你为root设置密码，此时需要先运行MariaDB。<br>

4. 运行 MariaDB

        service mysql start

    输出：

        Starting mysql (via systemctl): [ OK ]

5. 配置 MariaDB

        mysql_secure_installation

    &nbsp;&nbsp;&nbsp;&nbsp;如果出现" error: 'Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 "No such file or directory")' ",则说明MariaDB没有启动，需要先运行MariaDB，参考第4步。

        Enter current password for root (enter for none):  //输入当前的root密码(默认空)，直接回车
        Set root password? [Y/n]  //设置新密码，y
        Remove anonymous users? [Y/n]  //移除匿名用户，y
        Disallow root login remotely? [Y/n]  //禁止root用户远程登录，y
        Remove test database and access to it? [Y/n]  //移除测试数据库，y
        Reload privilege tables now? [Y/n]  //重新加载特权表，y

6. 常用命令
   
        systemctl start mariadb           #启动服务
        systemctl enable mariadb          #设置开机启动
        systemctl restart mariadb         #重新启动
        systemctl stop mariadb.service    #停止MariaDB


> &nbsp;&nbsp;参考 [https://www.jianshu.com/p/61e9cbd1b675](https://www.jianshu.com/p/61e9cbd1b675)


#### MariaDB修改默认字符编码

